{$i=0}
{foreach $mins as $min}
	{if $minsCount[$i] != 0}
		<div class="day_type">{$dayTypes[$i][1]}</div>
		{$j=0}
		{foreach $min as $m}
			{if $m|count > 0}
				<div class="hour">
					{$hours[$j]}
					{foreach $m as $mm}
						{$l = $mins1[$mm[0]|intval][0]}
						{$l = $l+45}
						{$t = $mins1[$mm[0]|intval][1]}
						{$t = $t+5}
						<span class="point" style="left:{$l}px; top:{$t}px;">*</span>
						
						{$cTime = $hours[$j]|cat:":"|cat:$mm[0]}
						{*passed time thanks to: http://stackoverflow.com/questions/2832467/php-how-can-i-check-if-the-current-date-time-is-past-a-set-date-time*}
						{if $mm[4]==2}
							{$status="starting"}
						{elseif $mm[4]==1}
							{$status="ending"}
						{else}
							{$status=""}
						{/if}
						
						{$l = $mins2[$mm[0]|intval][0]}
						{$l = $l+45}
						{$t = $mins2[$mm[0]|intval][1]}
						{$t = $t}
						{if $wPrint==null}
							<a{if $currTime > $cTime|strtotime} class="passed {$status}"{elseif $nextTimeHour > $cTime|strtotime} class="next {$status}"{else} class="{$status}"{/if} href="?line={$wLine}&amp;dir={$wDir}&amp;stop={$wStop}&amp;course={$mm[2]}&amp;day={$mm[3]}{call options}">
								<span class="min" style="left:{$l}px; top:{$t}px;">{$mm[0]}{$mm[1]}</span>
							</a>
						{else}
							{if $status=="starting"}
								{$css = "color: green;"}
								{$color = "green"}
							{elseif $status=="ending"}
								{$css = "color: red;"}
								{$color = "red"}
							{else}
								{$css=""}
								{$color = "black"}
							{/if}
							<span class="min" style="left:{$l}px; top:{$t}px;{$css}">{$mm[0]}{$mm[1]}</span>
						{/if}
					{/foreach}
				</div>
			{/if}
			{$j=$j+1}
		{/foreach}
		<br class="clear">
	{/if}
	{$i=$i+1}
{/foreach}